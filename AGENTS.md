# AGENTS.md

## 项目背景

- 项目名：TransparentMdReader
- 技术栈：C++17 + Qt6 (Widgets, WebEngine, WebChannel) + SQLite + CMake
- 目标：透明 Markdown 阅读器，支持锁定/点穿、右键翻页、Ctrl 临时解锁等行为。

## 必读文档

- `transparent_reader_development_documentation.md`
- `AI_README.md`
- `STAGE_PLAN.md`
- 其他约定文档：`BUG_FIX_PROMPTS.md` 等

在修改代码前，请先快速浏览以上文档，遵守其中的架构与约定。
如果用户提出超出文档的内容，跟用户说明冲突点，让用户选择，并根据用户选择内容更新以上文档。

## 行为约定（重点）

- 默认锁定状态：
  - 左键、滚轮等鼠标事件应点穿到底层窗口。
  - 右键在阅读区域内用于翻页（上半区上一页，下半区下一页），且**不穿透到底层窗口**。
- 按住 Ctrl：
  - 临时解锁：允许拖动窗口、滚轮滚动、点击链接、右键翻页。
  - 松开 Ctrl 后立即回到锁定/点穿状态。
- 任何改动都不得破坏上述行为；如需调整，请先给出详细设计说明。

## 代码约定

- 所有 Qt 相关逻辑保持在 `src/app/` 下，对 `build/` 目录内文件一律视为生成产物，不要手改。
- 路径全部使用相对路径（包括图片、配置文件、数据库等）。
- 避免引入额外的大型依赖，如需引入，请明确说明原因和替代方案。
-每次改完后，按照

## 交互约定

- 提供修复方案时，先总结问题根因，再给出**逐步操作**（修改哪些文件、哪几段代码）。
- 如果修复会影响现有行为，必须提前说明影响范围。
