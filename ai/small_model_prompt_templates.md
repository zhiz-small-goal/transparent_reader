# 小模型需求描述模板（C++ / Qt 项目专用）

本文件是给 Codex mini / GPT mini 等小模型用的提示模板，直接复制、替换中括号内容即可。

---

## 模板 A：添加新功能

用于：在现有工程里“加一个功能”（例如：拖拽打开 md、增加托盘菜单、添加最近文件等）。

```text
你现在是一个熟悉 C++17 和 Qt 6（Qt Widgets / Qt WebEngine / Qt WebChannel）的资深桌面开发助手。

【项目背景】
下面是项目的设计说明节选（只保留跟本次需求相关的部分）：
---
[在这里粘贴 AI_README.md 里相关小节，最好不要超过 200 行]
---

【当前代码】
下面是本次需要修改的文件，请完整阅读：

```cpp
// [文件路径，例如 src/app/MainWindow.h]
[在这里粘贴这个文件的完整内容]
```

```cpp
// [文件路径，例如 src/app/MainWindow.cpp]
[在这里粘贴这个文件的完整内容]
```

[如果这次只改一个文件，就只贴一个；尽量一次不要超过 2~3 个文件]

【这次要新增的功能】
请在保持现有结构和命名的前提下，为这个项目添加如下功能（描述要具体到“什么时候做什么事”）：

1. 功能目标：
   - [例如] 支持把本地 .md 文件拖拽到主窗口中时，自动打开这个文件，并渲染到当前 WebEngineView 中。

2. 行为细节：
   - [例如] 只接受扩展名为 .md 的文件，其它类型忽略。
   - [例如] 同时拖入多个文件时，只打开第一个。
   - [例如] 打开文件时，调用已有的 openMarkdownFile(const QString& path) 函数，不要重复实现逻辑。
   - [例如] 如果文件不存在或打不开，请用 qWarning 打一条日志，不要弹框。

3. 和状态 / 配置的关系（如果有）：
   - [例如] 打开成功后，要更新 AppState 里的当前文档，并加入最近打开列表。

【实现约束】
- 使用 C++17，不要使用协程、Concepts、Ranges 等 C++20+ 特性。
- 尽量复用现有函数（例如 openMarkdownFile / AppState 等），不要重复造轮子。
- 不要修改我没有贴出来的其它文件。
- 如果确实需要新增文件或类：
  - 请在答案最前面用列表说明“新增了哪些文件，每个文件是做什么的”。
- 输出时请给出 **每个被修改或新增文件的完整内容**，而不是 diff 片段。
- 如果有你不确定的地方，请用 TODO 注释标出来，但不要乱删现有逻辑。
```

---

## 模板 B：修 bug / 调整小逻辑

用于：某个文件编译不过 / 运行行为不对，让小模型帮你“查原因 + 最小修改”。

```text
你现在是一个熟悉 C++17 和 Qt 6 的资深桌面开发助手。

【项目背景（可选）】
如果需要，可以简单粘贴 AI_README.md 里跟这个模块相关的几段说明。

【错误现象】
请根据下面的现象和日志，找出问题原因并修复：

- 实际现象：
  - [例如] 拖拽 .md 文件到窗口上没有任何反应。
- 预期行为：
  - [例如] 拖拽 .md 文件到窗口上应该自动打开并显示内容。

【错误日志 / 编译错误】
[在这里粘贴报错信息或者运行时输出]

【当前代码】
问题应该出在下面这些文件中，请阅读完整代码：

```cpp
// [文件路径，例如 src/app/MainWindow.cpp]
[粘贴完整内容]
```

[如果关联多个文件，可以再贴 1~2 个，尽量不要太多]

【修改要求】
- 优先找出真正的原因，只改必要的地方，不要大范围重构。
- 保持 public 接口（对外可见的类名 / 函数名 / 参数）不变，除非确实错误。
- 不要修改没有贴出来的其它文件。
- 输出时同样给出 **完整的修改后文件**，而不是 diff。
- 如果有地方需要我补充信息，请用注释 `// TODO: 这里需要确认 X` 标出，不要胡乱猜测。
```
